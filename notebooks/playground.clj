;; gorilla-repl.fileformat = 1

;; **
;;; # Gorilla REPL
;;; 
;;; Welcome to gorilla :-)
;;; 
;;; Shift + enter evaluates code. Hit alt+g twice in quick succession or click the menu icon (upper-right corner) for more commands ...
;;; 
;;; It's a good habit to run each worksheet in its own namespace: feel free to use the declaration we've provided below if you'd like.
;; **

;; @@
(ns huri.examples
  (:use (huri core plot etl io time))
  (:require (clj-time [format :as t.format]
                      [core :as t])
            [clojure.string :as s]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def df (:stationBeanList (slurp-json "http://www.bayareabikeshare.com/stations/json")))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;huri.examples/df</span>","value":"#'huri.examples/df"}
;; <=

;; @@
(histogram :availableBikes {:bins 10} df)
;; @@
;; =>
;;; {"type":"html","content":"<?xml version='1.0' encoding='UTF-8'?>\n<svg viewBox='0 0 648.00 360.00' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>\n<defs>\n<style type='text/css'>\n\n    line, polyline, path, rect, circle {\n      fill: none;\n      stroke: #000000;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-miterlimit: 10.00;\n    }\n  \n</style>\n</defs>\n<rect style='stroke: none; fill: #FFFFFF;' height='100%' width='100%'/>\n<rect style='stroke-width: 1.07; stroke: #F0F0F0; fill: #F0F0F0;' height='360.00' width='648.00' y='0.00' x='0.00'/>\n<defs>\n<clipPath id='fc514678-429a-4718-8e7e-b49bde097b87'>\n<rect height='311.74' width='612.40' y='22.18' x='29.93'/>\n</clipPath>\n</defs>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: #F0F0F0; fill: #F0F0F0;' height='311.74' width='612.40' y='22.18' x='29.93'/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='29.93,319.75 642.33,319.75 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='29.93,245.17 642.33,245.17 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='29.93,170.59 642.33,170.59 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='29.93,96.01 642.33,96.01 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='83.07,333.92 83.07,22.18 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='231.93,333.92 231.93,22.18 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='380.79,333.92 380.79,22.18 '/>\n<polyline clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.53; stroke: #D9D9D9; stroke-linecap: butt;' points='529.65,333.92 529.65,22.18 '/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='216.28' width='50.61' y='103.47' x='57.77'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='167.80' width='50.61' y='151.95' x='108.38'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='283.40' width='50.61' y='36.35' x='158.99'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='205.09' width='50.61' y='114.66' x='209.60'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='149.16' width='50.61' y='170.59' x='260.21'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='52.20' width='50.61' y='267.54' x='310.82'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='41.02' width='50.61' y='278.73' x='361.44'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='14.92' width='50.61' y='304.83' x='412.05'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='7.46' width='50.61' y='312.29' x='462.66'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='7.46' width='50.61' y='312.29' x='513.27'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: none; stroke-linecap: butt; fill: #C0392B; fill-opacity: 0.75;' height='3.73' width='50.61' y='316.02' x='563.88'/>\n<line clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: #C0392B; stroke-dasharray: 5.69,5.69; stroke-linecap: butt;' y2='22.18' x2='202.93' y1='333.92' x1='202.93'/>\n<line clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 0.85; stroke-linecap: butt;' y2='319.75' x2='642.33' y1='319.75' x1='29.93'/>\n<rect clip-path='url(#fc514678-429a-4718-8e7e-b49bde097b87)' style='stroke-width: 1.07; stroke: #F0F0F0;' height='311.74' width='612.40' y='22.18' x='29.93'/>\n<defs>\n<clipPath id='db3d536a-9538-494b-8935-6d0c7c411f4f'>\n<rect height='360.00' width='648.00' y='0.00' x='0.00'/>\n</clipPath>\n</defs>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='3.34px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='321.81' x='22.56'>\n0\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='6.67px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='247.23' x='19.22'>\n20\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='6.67px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='172.66' x='19.22'>\n40\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='6.67px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='98.08' x='19.22'>\n60\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='3.34px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='342.08' x='81.40'>\n0\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='6.67px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='342.08' x='228.59'>\n10\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='6.67px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='342.08' x='377.45'>\n20\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='6.67px' style='font-size: 6.00px; fill: #737373; font-family: Liberation Sans;' y='342.08' x='526.31'>\n30\n</text>\n</g>\n<g clip-path='url(#db3d536a-9538-494b-8935-6d0c7c411f4f)'>\n<text lengthAdjust='spacingAndGlyphs' textLength='44.75px' style='font-size: 7.00px; fill: #525252; font-family: Liberation Sans;' y='351.50' x='313.76'>\navailableBikes\n</text>\n</g>\n</svg>\n","value":"#huri.plot.GGView{:plot-command [[:<- :g [:data.frame {:availableBikes [:c 14 6 13 21 18 14 13 7 12 0 7 24 11 5 9 1 23 17 25 17 14 16 14 9 4 8 15 10 7 0 3 3 9 19 31 0 7 8 5 11 5 11 26 7 13 21 16 0 6 6 5 10 0 2 15 24 14 13 18 3 8 9 0 13 0 0 0 3 3 5 11 8 16 19 34 0 0 1 7 9 0 8 26 20 0 0 7 0 10 4 7 15 6 2 10 13 0 0 9 7 5 2 5 7 12 14 7 14 5 0 12 1 11 7 11 7 3 6 13 8 0 11 11 4 10 8 0 6 7 15 8 10 5 3 9 8 11 13 9 14 6 16 7 0 9 7 9 10 11 13 17 6 0 11 0 8 7 0 6 13 7 7 19 10 9 7 6 11 29 20 13 0 5 3 11 8 6 1 2 3 6 13 20 3 12 10 0 16 6 7 11 7 6 12 8 12 5 11 12 5 0 8 6 7 6 7 8 6 0 3 6 6 3 3 4 10 4 4 3 7 0 11 15 6 15 0 22 10 12 10 13 11 5 11 5 0 0 10 0 0 0 0 10 0 0 0 8 0 7 9 0 0 10 9 0 0 0 16 2 9 16 19 7 12 8 4 4 18 2 12 7 7 6 6 11 0 0 0 7 1 10 0 4 6 6 0 9 1 10 11 8 2 8 13 13 11 7 0 8 8 2 22 8 12 17 9 9 0]}]] [[:library :ggplot2] [:library :scales] [:library :grid] [:library :RColorBrewer] [:library :ggrepel] [:library :directlabels] [:<- :palette [:brewer.pal \"Greys\" {:n 9}]] {:color.background :palette[2]} {:color.grid.major :palette[3]} {:color.axis.text :palette[6]} {:color.axis.title :palette[7]} {:color.title :palette[9]}] [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:ggplot :g [:aes :availableBikes {}]] [:geom_histogram {:binwidth 17/5, :alpha 0.75, :fill \"#c0392b\"}]] [:geom_vline [:aes {:xintercept [:mean :availableBikes]}] {:linetype \"dashed\", :color \"#c0392b\", :size 0.5}]] [:geom_hline {:yintercept 0, :size 0.4, :colour \"black\"}]] [:scale_x_continuous {:labels :comma}]] [:scale_y_continuous {:labels :comma}]] [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:+ [:theme_bw {:base_size 9}] [:theme {:panel.background [:element_rect {:fill :color.background, :color :color.background}]}]] [:theme {:plot.background [:element_rect {:fill :color.background, :color :color.background}]}]] [:theme {:panel.border [:element_rect {:color :color.background}]}]] [:theme {:panel.grid.major [:element_line {:color :color.grid.major, :size 0.25}]}]] [:theme {:panel.grid.minor [:element_blank]}]] [:theme {:axis.ticks [:element_blank]}]] [:theme {:legend.background [:element_rect {:fill :color.background}]}]] [:theme {:legend.key [:element_rect {:fill :color.background, :color :color.background}]}]] [:theme {:legend.text [:element_text {:size 6, :color :color.axis.title}]}]] [:theme {:legend.title [:element_blank]}]] [:theme {:plot.title [:element_text {:size 10, :color :color.title, :vjust 1.25}]}]] [:theme {:axis.text.x [:element_text {:size 6, :color :color.axis.text}]}]] [:theme {:axis.text.y [:element_text {:size 6, :color :color.axis.text}]}]] [:theme {:axis.title.x [:element_text {:size 7, :color :color.axis.title, :vjust 0}]}]] [:theme {:axis.title.y [:element_text {:size 7, :color :color.axis.title, :vjust 1.25}]}]] [:theme {:plot.margin [:unit [:c 0.35 0.2 0.3 0.35] \"cm\"]}]]] [:theme {:legend.position \"none\"}]] [:labs {:y \"\", :title \"\", :x \"availableBikes\"}]]], :options {:width 9, :height 5}}"}
;; <=

;; @@

;; @@
